---
title: "ClientContextType"
mode: wide
---
  
# Interface: ClientContextType

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:41](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L41)

## Extends

- [`TurnkeyClientMethods`](../../../core/index/TurnkeyClientMethods/readme)

## Properties

### addOauthProvider()

> **addOauthProvider**: (`params`) => `Promise`\<`string`[]\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:657

Adds an OAuth provider to the user.

- This function adds an OAuth provider (e.g., Google, Apple) to the user account.
- If a userId is provided, it adds the provider for that specific user; otherwise, it uses the current session's userId.
- Automatically checks if an account already exists for the provided OIDC token and prevents duplicate associations.
- If the user's email is not set or not verified, attempts to update and verify the email using the email from the OIDC token.
- Handles session management and error reporting for the add provider flow.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Parameters

##### params

###### oidcToken

`string`

OIDC token for the OAuth provider.

###### providerName

`string`

name of the OAuth provider to add (e.g., "Google", "Apple").

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### userId?

`string`

user ID to add the provider for a specific user (defaults to current session's userId).

#### Returns

`Promise`\<`string`[]\>

A promise that resolves to an array of provider IDs associated with the user.

#### Throws

If there is no active session, if the account already exists, or if there is an error adding the OAuth provider.

#### Inherited from

`TurnkeyClientMethods.addOauthProvider`

***

### addPasskey()

> **addPasskey**: (`params?`) => `Promise`\<`string`[]\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:699

Adds a new passkey authenticator for the user.

- This function prompts the user to create a new passkey (WebAuthn/FIDO2) and adds it as an authenticator for the user.
- Handles both web and React Native environments, automatically selecting the appropriate passkey creation flow.
- If a userId is provided, the passkey is added for that specific user; otherwise, it uses the current session's userId.
- The passkey's name and display name can be customized; if not provided, defaults are generated.
- The resulting passkey attestation and challenge are registered with Turnkey as a new authenticator.

#### Parameters

##### params?

###### displayName?

`string`

display name of the passkey (defaults to the value of `name`).

###### name?

`string`

name of the passkey (defaults to "Turnkey Passkey-`timestamp`").

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### userId?

`string`

user ID to add the passkey for a specific user (defaults to the current session's userId).

#### Returns

`Promise`\<`string`[]\>

A promise that resolves to an array of authenticator IDs for the newly added passkey(s).

#### Throws

If there is no active session, if passkey creation fails, or if there is an error adding the passkey.

#### Inherited from

`TurnkeyClientMethods.addPasskey`

***

### allSessions?

> `optional` **allSessions**: `Record`\<`string`, [`Session`](../../../sdk-browser/index/Session/readme)\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:44](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L44)

***

### authState

> **authState**: `AuthState`

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:46](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L46)

***

### clearAllSessions()

> **clearAllSessions**: () => `Promise`\<`void`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:884

Clears all sessions and resets the active session state.

- This function removes all session data from the client and persistent storage, including all associated key pairs.
- Iterates through all stored session keys, clearing each session and deleting its corresponding API key pair.
- After clearing, there will be no active session, and all session-related data will be removed from local storage.
- Throws an error if no sessions exist or if there is an error during the clearing process.

#### Returns

`Promise`\<`void`\>

A promise that resolves when all sessions are successfully cleared.

#### Throws

If no sessions exist or if there is an error clearing all sessions.

#### Inherited from

`TurnkeyClientMethods.clearAllSessions`

***

### clearSession()

> **clearSession**: (`params?`) => `Promise`\<`void`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:870

Clears the session associated with the specified session key, or the active session by default.

- This function deletes the session and its associated key pair from storage.
- If a sessionKey is provided, it will clear the session under that key; otherwise, it will clear the default (active) session.
- Removes the session data from local storage and deletes the corresponding API key pair from the key store.
- Throws an error if the session does not exist or if there is an error during the clearing process.

#### Parameters

##### params?

###### sessionKey?

`string`

session key to clear the session under (defaults to the default session key).

#### Returns

`Promise`\<`void`\>

A promise that resolves when the session is successfully cleared.

#### Throws

If the session does not exist or if there is an error clearing the session.

#### Inherited from

`TurnkeyClientMethods.clearSession`

***

### clearUnusedKeyPairs()

> **clearUnusedKeyPairs**: () => `Promise`\<`void`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:974

Clears any unused API key pairs from persistent storage.

- This function scans all API key pairs stored in indexedDB and removes any key pairs that are not associated with a session in persistent storage.
- Ensures that only key pairs referenced by existing sessions are retained, preventing orphaned or stale key pairs from accumulating.
- Iterates through all stored session keys and builds a map of in-use public keys, then deletes any key pairs not present in this map.
- Intended to be called after session changes (e.g., login, logout, session replacement) to keep key storage clean and secure.

#### Returns

`Promise`\<`void`\>

A promise that resolves when all unused key pairs are successfully cleared.

#### Throws

If there is an error listing, checking, or deleting unused key pairs.

#### Inherited from

`TurnkeyClientMethods.clearUnusedKeyPairs`

***

### clientState

> **clientState**: `ClientState`

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:45](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L45)

***

### completeOauth()

> **completeOauth**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:347

Completes the OAuth authentication flow by either signing up or logging in the user, depending on whether a sub-organization already exists for the provided OIDC token.

- This function first checks if there is an existing sub-organization associated with the OIDC token.
- If a sub-organization exists, it proceeds with the OAuth login flow.
- If no sub-organization exists, it creates a new sub-organization and completes the sign-up flow.
- Optionally accepts a custom OAuth provider name, session key, and additional sub-organization creation parameters.
- Handles session storage and management, and supports invalidating existing sessions if specified.

#### Parameters

##### params

###### createSubOrgParams?

[`CreateSubOrgParams`](../CreateSubOrgParams/readme)

parameters for sub-organization creation (e.g., authenticators, user metadata).

###### invalidateExisting?

`boolean`

flag to invalidate existing sessions for the user.

###### oidcToken

`string`

OIDC token received after successful authentication with the OAuth provider.

###### providerName?

`string`

name of the OAuth provider (defaults to a generated name with a timestamp).

###### publicKey

`string`

public key to use for authentication. Must be generated prior to calling this function.

###### sessionKey?

`string`

session key to use for session creation (defaults to the default session key).

#### Returns

`Promise`\<`string`\>

A promise that resolves to a signed JWT session token for the user.

#### Throws

If there is an error during the OAuth completion process, such as account lookup, sign-up, or login.

#### Inherited from

`TurnkeyClientMethods.completeOauth`

***

### completeOtp()

> **completeOtp**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:319

Completes the OTP authentication flow by verifying the OTP code and then either signing up or logging in the user.

- This function first verifies the OTP code for the provided contact and OTP type.
- If the contact is not associated with an existing sub-organization, it will automatically create a new sub-organization and complete the sign-up flow.
- If the contact is already associated with a sub-organization, it will complete the login flow.
- Supports passing a custom public key for authentication, invalidating existing session, specifying a session key, and providing additional sub-organization creation parameters.
- Handles both email and SMS OTP types.

#### Parameters

##### params

###### contact

`string`

contact information for the user (e.g., email address or phone number).

###### createSubOrgParams?

[`CreateSubOrgParams`](../CreateSubOrgParams/readme)

parameters for sub-organization creation (e.g., authenticators, user metadata).

###### invalidateExisting?

`boolean`

flag to invalidate existing sessions for the user.

###### otpCode

`string`

OTP code entered by the user.

###### otpId

`string`

ID of the OTP to complete (returned from `initOtp`).

###### otpType

[`OtpType`](../OtpType/readme)

type of OTP being completed (OtpType.Email or OtpType.Sms).

###### publicKey?

`string`

public key to use for authentication. If not provided, a new key pair may be generated.

###### sessionKey?

`string`

session key to use for session creation (defaults to the default session key).

#### Returns

`Promise`\<`string`\>

A promise that resolves to a signed JWT session token for the user.

#### Throws

If there is an error during OTP verification, sign-up, or login.

#### Inherited from

`TurnkeyClientMethods.completeOtp`

***

### config?

> `optional` **config**: `TurnkeyProviderConfig`

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:47](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L47)

***

### connectWalletAccount()

> **connectWalletAccount**: (`walletProvider`) => `Promise`\<`void`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:118

Connects the specified wallet account.

- Requires the wallet manager and its connector to be initialized.

#### Parameters

##### walletProvider

[`WalletProvider`](../WalletProvider/readme)

wallet provider to connect.

#### Returns

`Promise`\<`void`\>

A promise that resolves once the wallet account is connected.

#### Throws

If the wallet manager is uninitialized or the connection fails.

#### Inherited from

`TurnkeyClientMethods.connectWalletAccount`

***

### createApiKeyPair()

> **createApiKeyPair**: (`params?`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:989

Creates a new API key pair and returns the public key.

- This function generates a new API key pair and stores it in the underlying key store (IndexedDB).
- If an external key pair is provided, it will use that key pair for creation instead of generating a new one.
- If `storeOverride` is set to true, the generated or provided public key will be set as the override key in the API key stamper, making it the active key for subsequent signing operations.
- Ensures the API key stamper is initialized before proceeding.
- Handles both native CryptoKeyPair objects and raw key material.

#### Parameters

##### params?

###### externalKeyPair?

`CryptoKeyPair` \| \{ `privateKey`: `string`; `publicKey`: `string`; \}

An externally generated key pair (either a CryptoKeyPair or an object with publicKey/privateKey strings) to use instead of generating a new one.

###### storeOverride?

`boolean`

If true, sets the generated or provided public key as the override key in the API key stamper (defaults to false).
@returnparams.s A promise that resolves to the public key of the created or provided API key pair as a string.

#### Returns

`Promise`\<`string`\>

#### Throws

If the API key stamper is not initialized or if there is an error during key pair creation or storage.

#### Inherited from

`TurnkeyClientMethods.createApiKeyPair`

***

### createPasskey()

> **createPasskey**: (`params?`) => `Promise`\<\{ `attestation`: [`v1Attestation`](../../../_turnkey/sdk-types/v1Attestation/readme); `encodedChallenge`: `string`; \}\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:34

Creates a new passkey authenticator for the user.

- This function generates a new passkey attestation and challenge, suitable for registration with the user's device.
- Handles both web and React Native environments, automatically selecting the appropriate passkey creation flow.
- The resulting attestation and challenge can be used to register the passkey with Turnkey.

#### Parameters

##### params?

###### displayName?

`string`

display name for the passkey. If not provided, defaults to "A Passkey".

###### name?

`string`

name of the passkey. If not provided, defaults to "A Passkey".

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Returns

`Promise`\<\{ `attestation`: [`v1Attestation`](../../../_turnkey/sdk-types/v1Attestation/readme); `encodedChallenge`: `string`; \}\>

A promise that resolves to an object containing:
  - attestation: attestation object returned from the passkey creation process.
  - encodedChallenge: encoded challenge string used for passkey registration.

#### Throws

If there is an error during passkey creation, or if the platform is unsupported.

#### Inherited from

`TurnkeyClientMethods.createPasskey`

***

### createWallet()

> **createWallet**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:744

Creates a new wallet for sub-organization.

- This function creates a new wallet for the current sub-organization.
- If an organizationId is provided, the wallet will be created under that specific sub-organization; otherwise, it uses the current session's organizationId.
- If a list of address formats is provided, accounts will be created in the wallet based on those formats (starting from path index 0).
- If a list of account parameters is provided, those accounts will be created in the wallet.
- If no accounts or address formats are provided, default Ethereum and Solana accounts will be created.
- Optionally allows specifying the mnemonic length for the wallet seed phrase (defaults to 12).
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Parameters

##### params

###### accounts?

[`v1AddressFormat`](../../../_turnkey/sdk-types/v1AddressFormat/readme)[] \| [`v1WalletAccountParams`](../../../_turnkey/sdk-types/v1WalletAccountParams/readme)[]

array of account parameters or address formats to create in the wallet.

###### mnemonicLength?

`number`

mnemonic length for the wallet seed phrase (defaults to 12).

###### organizationId?

`string`

organization ID to create the wallet under a specific sub-organization (defaults to the current session's organizationId).

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### walletName

`string`

name of the wallet to create.

#### Returns

`Promise`\<`string`\>

A promise that resolves to the ID of the newly created wallet.

#### Throws

If there is no active session or if there is an error creating the wallet.

#### Inherited from

`TurnkeyClientMethods.createWallet`

***

### createWalletAccounts()

> **createWalletAccounts**: (`params`) => `Promise`\<`string`[]\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:768

Creates new accounts in the specified wallet.

- This function creates new wallet accounts based on the provided account parameters or address formats.
- If a walletId is provided, it creates the accounts in that specific wallet; otherwise, it uses the current session's wallet.
- If a list of address formats is provided, it will create accounts in the wallet based on those formats, automatically determining the next available path indexes to avoid duplicates with existing accounts.
- If account parameters are provided, they are used directly for account creation.
- Automatically queries existing wallet accounts to prevent duplicate account creation for the same address format and path.
- Supports stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Parameters

##### params

###### accounts

[`v1AddressFormat`](../../../_turnkey/sdk-types/v1AddressFormat/readme)[] \| [`v1WalletAccountParams`](../../../_turnkey/sdk-types/v1WalletAccountParams/readme)[]

An array of account parameters or address formats to create in the wallet.

###### organizationId?

`string`

organization ID to create the accounts under a specific organization (walletId must be associated with the sub-organization).

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### walletId

`string`

ID of the wallet to create accounts in.

#### Returns

`Promise`\<`string`[]\>

A promise that resolves to an array of addresses for the newly created accounts.

#### Throws

If there is no active session, if the wallet does not exist, or if there is an error creating the wallet accounts.

#### Inherited from

`TurnkeyClientMethods.createWalletAccounts`

***

### deleteSubOrganization()

> **deleteSubOrganization**: (`params?`) => `Promise`\<[`TDeleteSubOrganizationResponse`](../../../_turnkey/sdk-types/TDeleteSubOrganizationResponse/readme)\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:836

Deletes the current sub-organization (sub-org) for the active session.

- This function deletes the sub-organization associated with the current active session.
- By default, the deletion will fail if any wallets associated with the sub-organization have not been exported.
- If `deleteWithoutExport` is set to true, the sub-organization will be deleted even if its wallets have not been exported (potentially resulting in loss of access to those wallets).
- Requires an active session; otherwise, an error is thrown.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Parameters

##### params?

###### deleteWithoutExport?

`boolean`

flag to delete the sub-organization without requiring all wallets to be exported first (defaults to false).

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper.

#### Returns

`Promise`\<[`TDeleteSubOrganizationResponse`](../../../_turnkey/sdk-types/TDeleteSubOrganizationResponse/readme)\>

A promise that resolves to a `TDeleteSubOrganizationResponse` object containing the result of the deletion.

#### Throws

If there is no active session or if there is an error deleting the sub-organization.

#### Inherited from

`TurnkeyClientMethods.deleteSubOrganization`

***

### disconnectWalletAccount()

> **disconnectWalletAccount**: (`walletProvider`) => `Promise`\<`void`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:128

Disconnects the specified wallet account.

- Requires the wallet manager and its connector to be initialized.

#### Parameters

##### walletProvider

[`WalletProvider`](../WalletProvider/readme)

wallet provider to disconnect.

#### Returns

`Promise`\<`void`\>

A promise that resolves once the wallet account is disconnected.

#### Throws

If the wallet manager is uninitialized or the disconnection fails.

#### Inherited from

`TurnkeyClientMethods.disconnectWalletAccount`

***

### exportWallet()

> **exportWallet**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:791

Exports a wallet as an encrypted bundle.

- This function exports the specified wallet and its accounts as an encrypted bundle, suitable for backup or transfer.
- The exported bundle contains the wallet's seed phrase, encrypted to the provided target public key.
- If a targetPublicKey is provided, the bundle will be encrypted to that public key; otherwise, an error will be thrown.
- If an organizationId is provided, the wallet will be exported under that sub-organization; otherwise, the current session's organizationId is used.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).
- The exported bundle can later be imported using the `importWallet` method.

#### Parameters

##### params

###### organizationId?

`string`

organization ID to export the wallet under a specific sub-organization (walletId must be associated with the sub-organization).

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### targetPublicKey

`string`

public key to encrypt the bundle to (required).

###### walletId

`string`

ID of the wallet to export.

#### Returns

`Promise`\<`string`\>

A promise that resolves to an `ExportBundle` object containing the encrypted wallet seed phrase and metadata.

#### Throws

If there is no active session, if the targetPublicKey is missing, or if there is an error exporting the wallet.

#### Inherited from

`TurnkeyClientMethods.exportWallet`

***

### fetchUser()

> **fetchUser**: (`params?`) => `Promise`\<[`v1User`](../../../_turnkey/sdk-types/v1User/readme)\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:537

Fetches the user details for the current session or a specified user.

- Retrieves user details from the Turnkey API using the provided userId and organizationId, or defaults to those from the active session.
- If no userId is provided, the userId from the current session is used.
- If no organizationId is provided, the organizationId from the current session is used.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).
- Ensures that an active session exists before making the request.

#### Parameters

##### params?

###### organizationId?

`string`

organization ID to specify the sub-organization (defaults to the current session's organizationId).

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### userId?

`string`

user ID to fetch specific user details (defaults to the current session's userId).

#### Returns

`Promise`\<[`v1User`](../../../_turnkey/sdk-types/v1User/readme)\>

A promise that resolves to a `v1User` object containing the user details.

#### Throws

If there is no active session, if there is no userId, or if there is an error fetching user details.

#### Inherited from

`TurnkeyClientMethods.fetchUser`

***

### fetchWalletAccounts()

> **fetchWalletAccounts**: (`params`) => `Promise`\<[`WalletAccount`](../WalletAccount/readme)[]\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:431

Fetches all accounts for a specific wallet, including both embedded and connected wallet accounts.

- For embedded wallets, retrieves accounts from the Turnkey API, supporting pagination (defaults to the first page with a limit of 100 accounts).
- For connected wallets (e.g., browser extensions or external providers), constructs account objects for each connected address from the provided or discovered wallet providers.
- Automatically determines the account type and populates relevant fields such as address, curve, and signing capability.
- Optionally allows filtering by a specific set of wallet providers and supports custom pagination options.
- Supports stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Parameters

##### params

###### paginationOptions?

[`v1Pagination`](../../../_turnkey/sdk-types/v1Pagination/readme)

pagination options for embedded wallets.

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### wallet

[`Wallet`](../Wallet/readme)

wallet for which to fetch accounts.

###### walletProviders?

[`WalletProvider`](../WalletProvider/readme)[]

list of wallet providers to filter by (used for connected wallets).

#### Returns

`Promise`\<[`WalletAccount`](../WalletAccount/readme)[]\>

A promise that resolves to an array of `v1WalletAccount` objects.

#### Throws

If no active session is found or if there is an error fetching wallet accounts.

#### Inherited from

`TurnkeyClientMethods.fetchWalletAccounts`

***

### fetchWallets()

> **fetchWallets**: (`params?`) => `Promise`\<[`Wallet`](../Wallet/readme)[]\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:412

Fetches all wallets for the current user, including both embedded and connected wallets.

- Retrieves all wallets associated with the organizationId from the current active session.
- For each embedded wallet, automatically fetches and attaches all associated wallet accounts.
- For connected wallets (e.g., browser extensions or external providers), groups providers by wallet name and attaches all connected accounts.
- Returns both embedded and connected wallets in a single array, each with their respective accounts populated.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Parameters

##### params?

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Returns

`Promise`\<[`Wallet`](../Wallet/readme)[]\>

A promise that resolves to an array of `Wallet` objects.

#### Throws

If no active session is found or if there is an error fetching wallets.

#### Inherited from

`TurnkeyClientMethods.fetchWallets`

***

### getActiveSessionKey()

> **getActiveSessionKey**: () => `Promise`\<`undefined` \| `string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:962

Retrieves the active session key currently set in persistent storage.

- This function fetches the session key that is currently marked as active in the client's persistent storage.
- The active session key determines which session is used for all session-dependent operations.
- If no active session key is set, returns `undefined`.
- Useful for determining which session is currently in use, especially when managing multiple sessions.

#### Returns

`Promise`\<`undefined` \| `string`\>

A promise that resolves to the active session key as a string, or `undefined` if no active session is set.

#### Throws

If there is an error retrieving the active session key from storage.

#### Inherited from

`TurnkeyClientMethods.getActiveSessionKey`

***

### getAllSessions()

> **getAllSessions**: () => `Promise`\<`undefined` \| `Record`\<`string`, [`Session`](../../../sdk-browser/index/Session/readme)\>\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:935

Retrieves all sessions stored in persistent storage.

- This function fetches all session objects currently stored by the client, including those that are not active.
- Returns a record mapping each session key to its corresponding `Session` object.
- Useful for session management, auditing, or displaying all available sessions to the user.
- Automatically skips any session keys that do not have a valid session object.

#### Returns

`Promise`\<`undefined` \| `Record`\<`string`, [`Session`](../../../sdk-browser/index/Session/readme)\>\>

A promise that resolves to a record of session keys and their corresponding `Session` objects, or `undefined` if no sessions exist.

#### Throws

If there is an error retrieving sessions from storage.

#### Inherited from

`TurnkeyClientMethods.getAllSessions`

***

### getProxyAuthConfig()

> **getProxyAuthConfig**: () => `Promise`\<[`ProxyTGetWalletKitConfigResponse`](../../../_turnkey/sdk-types/ProxyTGetWalletKitConfigResponse/readme)\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:1007

Fetches the WalletKit proxy authentication configuration from the auth proxy.

- This function makes a request to the Turnkey auth proxy to retrieve the current WalletKit configuration,
  including supported authentication methods, OAuth providers, and any custom proxy settings.
- Useful for dynamically configuring the client UI or authentication flows based on the proxy's capabilities.
- Ensures that the client is aware of the latest proxy-side configuration, which may affect available login/signup options.

#### Returns

`Promise`\<[`ProxyTGetWalletKitConfigResponse`](../../../_turnkey/sdk-types/ProxyTGetWalletKitConfigResponse/readme)\>

A promise that resolves to a `ProxyTGetWalletKitConfigResponse` object containing the proxy authentication configuration.

#### Throws

If there is an error retrieving the proxy authentication configuration from the auth proxy.

#### Inherited from

`TurnkeyClientMethods.getProxyAuthConfig`

***

### getSession()

> **getSession**: (`params?`) => `Promise`\<`undefined` \| [`Session`](../../../sdk-browser/index/Session/readme)\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:921

Retrieves the session associated with the specified session key, or the active session by default.

- This function retrieves the session object from storage, using the provided session key or, if not specified, the current active session key.
- If no session key is provided and there is no active session, it returns undefined.
- Returns the session details, including public key, organization ID, user ID, and expiration.

#### Parameters

##### params?

###### sessionKey?

`string`

session key to retrieve a specific session (defaults to the current active session key).

#### Returns

`Promise`\<`undefined` \| [`Session`](../../../sdk-browser/index/Session/readme)\>

A promise that resolves to a `Session` object containing the session details, or undefined if not found.

#### Throws

If there is an error retrieving the session from storage.

#### Inherited from

`TurnkeyClientMethods.getSession`

***

### getWalletProviders()

> **getWalletProviders**: (`chain?`) => `Promise`\<[`WalletProvider`](../WalletProvider/readme)[]\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:108

Retrieves wallet providers from the initialized wallet manager.

- Optionally filters providers by the specified blockchain chain.
- Throws an error if the wallet manager is not initialized.

#### Parameters

##### chain?

[`Chain`](../Chain/readme)

optional blockchain chain to filter the returned providers.

#### Returns

`Promise`\<[`WalletProvider`](../WalletProvider/readme)[]\>

A promise that resolves to an array of wallet providers.

#### Throws

If the wallet manager is uninitialized or provider retrieval fails.

#### Inherited from

`TurnkeyClientMethods.getWalletProviders`

***

### handleAddEmail()

> **handleAddEmail**: (`params?`) => `Promise`\<`string`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:356](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L356)

Handles the add user email flow.

- This function opens a modal with the UpdateEmail component, using a modified title and flow for adding and verifying the user's email address.
- If an email is provided, it will immediately send an OTP request to the user and display the OTP verification modal.
- Supports both manual entry and pre-filled email addresses, as well as custom modal titles and subtitles.
- Uses the addEmailContinue helper to manage the OTP flow, verification, and update logic.
- After successful verification and update, the user details state is refreshed and an optional success page can be shown.
- Supports customizing the duration of the success page after update.
- Handles all error cases and throws a TurnkeyError with appropriate error codes.

#### Parameters

##### params?

###### email?

`string`

parameter to specify the new email address.

###### subTitle?

`string`

subtitle for the modal.

###### successPageDuration?

`number`

duration (in ms) for the success page after update (default: 0, no success page).

###### title?

`string`

title for the modal (defaults to "Connect an email" if the user does not have an email).

#### Returns

`Promise`\<`string`\>

A promise that resolves to the userId of the user that was changed.

#### Throws

If the client is not initialized, no active session is found, or if there is an error adding the email.

***

### handleUpdateUserName()

> **handleUpdateUserName**: (`params?`) => `Promise`\<`string`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:330](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L330)

Handles the update user email flow.

- This function opens a modal with the UpdateEmail component for updating and verifying the user's email address.
- If an email is provided, it will immediately send an OTP request to the user and display the OTP verification modal.
- Supports both manual entry and pre-filled email addresses, as well as custom modal titles and subtitles.
- Uses the updateEmailContinue helper to manage the OTP flow, verification, and update logic.
- After successful verification and update, the user details state is refreshed and an optional success page can be shown.
- Supports customizing the duration of the success page after update.
- Handles all error cases and throws a TurnkeyError with appropriate error codes.

#### Parameters

##### params?

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to specify the stamper to use for the update (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### subTitle?

`string`

subtitle for the modal.

###### successPageDuration?

`number`

duration (in ms) for the success page after update (default: 0, no success page).

###### title?

`string`

title for the modal.

###### userName?

`string`

#### Returns

`Promise`\<`string`\>

A promise that resolves to the userId of the user that was changed.

#### Throws

If the client is not initialized, no active session is found, or if there is an error updating the email.

***

### httpClient

> **httpClient**: `undefined` \| `TurnkeySDKClientBase`

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:42](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L42)

***

### importWallet()

> **importWallet**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:815

Imports a wallet from an encrypted bundle.

- This function imports a wallet using the provided encrypted bundle and creates accounts based on the provided parameters.
- If a userId is provided, the wallet will be imported for that specific user; otherwise, it uses the current session's userId.
- If an accounts array is provided, those accounts will be created in the imported wallet; otherwise, default Ethereum and Solana accounts will be created.
- The encrypted bunlde MUST be encrypted to
- Automatically ensures an active session exists before making the request.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Parameters

##### params

###### accounts?

[`v1WalletAccountParams`](../../../_turnkey/sdk-types/v1WalletAccountParams/readme)[]

array of account parameters to create in the imported wallet (defaults to standard Ethereum and Solana accounts).

###### encryptedBundle

`string`

encrypted bundle containing the wallet seed phrase and metadata.

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### userId?

`string`

user ID to import the wallet for a specific user (defaults to the current session's userId).

###### walletName

`string`

name of the wallet to create upon import.

#### Returns

`Promise`\<`string`\>

A promise that resolves to the ID of the imported wallet.

#### Throws

If there is no active session, if the encrypted bundle is invalid, or if there is an error importing the wallet.

#### Inherited from

`TurnkeyClientMethods.importWallet`

***

### initOtp()

> **initOtp**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:221

Initializes the OTP process by sending an OTP code to the provided contact.

- This function initiates the OTP flow by sending a one-time password (OTP) code to the user's contact information (email address or phone number) via the auth proxy.
- Supports both email and SMS OTP types.
- Returns an OTP ID that is required for subsequent OTP verification.

#### Parameters

##### params

###### contact

`string`

contact information for the user (e.g., email address or phone number).

###### otpType

[`OtpType`](../OtpType/readme)

type of OTP to initialize (OtpType.Email or OtpType.Sms).

#### Returns

`Promise`\<`string`\>

A promise that resolves to the OTP ID required for verification.

#### Throws

If there is an error during the OTP initialization process or if the maximum number of OTPs has been reached.

#### Inherited from

`TurnkeyClientMethods.initOtp`

***

### loginOrSignupWithWallet()

> **loginOrSignupWithWallet**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:203

Logs in an existing user or signs up a new user using a wallet, creating a new sub-organization if needed.

- This function attempts to log in the user by stamping a login request with the provided wallet.
- If the wallet’s public key is not associated with an existing sub-organization, a new one is created.
- Handles both wallet authentication and sub-organization creation in a single flow.
- For Ethereum wallets, derives the public key from the signed request header; for Solana wallets, retrieves it directly from the wallet.
- Optionally accepts additional sub-organization parameters, a custom session key, and a custom session expiration.
- Stores the resulting session token under the specified session key, or the default session key if not provided.

#### Parameters

##### params

###### createSubOrgParams?

[`CreateSubOrgParams`](../CreateSubOrgParams/readme)

optional parameters for creating a sub-organization (e.g., authenticators, user metadata).

###### expirationSeconds?

`string`

session expiration time in seconds (defaults to the configured default).

###### sessionKey?

`string`

session key to use for storing the session (defaults to the default session key).

###### walletProvider

[`WalletProvider`](../WalletProvider/readme)

wallet provider to use for authentication.

#### Returns

`Promise`\<`string`\>

A promise that resolves to a signed JWT session token for the sub-organization (new or existing).

#### Throws

If there is an error during wallet authentication, sub-organization creation, or session storage.

#### Inherited from

`TurnkeyClientMethods.loginOrSignupWithWallet`

***

### loginWithOauth()

> **loginWithOauth**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:370

Logs in a user using OAuth authentication.

- This function logs in a user using the provided OIDC token and public key.
- Optionally invalidates any existing sessions for the user if `invalidateExisting` is set to true.
- Stores the resulting session token under the specified session key, or the default session key if not provided.
- Handles cleanup of unused key pairs if login fails.

#### Parameters

##### params

###### invalidateExisting?

`boolean`

flag to invalidate existing sessions for the user.

###### oidcToken

`string`

OIDC token received after successful authentication with the OAuth provider.

###### publicKey

`string`

public key to use for authentication. Must be generated prior to calling this function.

###### sessionKey?

`string`

session key to use for session creation (defaults to the default session key).

#### Returns

`Promise`\<`string`\>

A promise that resolves to a signed JWT session token.

#### Throws

If there is an error during the OAuth login process or if key pair cleanup fails.

#### Inherited from

`TurnkeyClientMethods.loginWithOauth`

***

### loginWithOtp()

> **loginWithOtp**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:267

Logs in a user using an OTP verification token.

- This function logs in a user using the verification token received after OTP verification (from email or SMS).
- If a public key is not provided, a new API key pair will be generated for authentication.
- Optionally invalidates any existing sessions for the user if `invalidateExisting` is set to true.
- Stores the resulting session token under the specified session key, or the default session key if not provided.
- Handles cleanup of unused key pairs if login fails.

#### Parameters

##### params

###### invalidateExisting?

`boolean`

flag to invalidate existing session for the user.

###### publicKey?

`string`

public key to use for authentication. If not provided, a new key pair will be generated.

###### sessionKey?

`string`

session key to use for session creation (defaults to the default session key).

###### verificationToken

`string`

verification token received after OTP verification.

#### Returns

`Promise`\<`string`\>

A promise that resolves to a signed JWT session token.

#### Throws

If there is an error during the OTP login process or if key pair cleanup fails.

#### Inherited from

`TurnkeyClientMethods.loginWithOtp`

***

### loginWithPasskey()

> **loginWithPasskey**: (`params?`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:71

Logs in a user using a passkey, optionally specifying the public key, session key, and session expiration.

- This function initiates the login process with a passkey and handles session creation and storage.
- If a public key is not provided, a new key pair will be generated for authentication.
- If a session key is not provided, the default session key will be used.
- The session expiration can be customized via the expirationSeconds parameter.
- Handles cleanup of unused key pairs if login fails.

#### Parameters

##### params?

###### expirationSeconds?

`string`

session expiration time in seconds (defaults to the configured default).

###### publicKey?

`string`

public key to use for authentication. If not provided, a new key pair will be generated.

###### sessionKey?

`string`

session key to use for session creation (defaults to the default session key).

#### Returns

`Promise`\<`string`\>

A promise that resolves to a signed JWT session token.

#### Throws

If there is an error during the passkey login process or if the user cancels the passkey prompt.

#### Inherited from

`TurnkeyClientMethods.loginWithPasskey`

***

### loginWithWallet()

> **loginWithWallet**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:158

Logs in a user using the specified wallet provider.

- This function logs in a user by authenticating with the provided wallet provider via a wallet-based signature.
- If a public key is not provided, a new one will be generated for authentication.
- Optionally accepts a custom session key and session expiration time.
- Stores the resulting session token under the specified session key, or the default session key if not provided.
- Throws an error if a public key cannot be found or generated, or if the login process fails.

#### Parameters

##### params

###### expirationSeconds?

`string`

optional session expiration time in seconds (defaults to the configured default).

###### publicKey?

`string`

optional public key to associate with the session (generated if not provided).

###### sessionKey?

`string`

optional key to store the session under (defaults to the default session key).

###### walletProvider

[`WalletProvider`](../WalletProvider/readme)

wallet provider to use for authentication.

#### Returns

`Promise`\<`string`\>

A promise that resolves to the created session token.

#### Throws

If the wallet stamper is uninitialized, a public key cannot be found or generated, or login fails.

#### Inherited from

`TurnkeyClientMethods.loginWithWallet`

***

### logout()

> **logout**: (`params?`) => `Promise`\<`void`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:53

Logs out the current client session.

- This function clears the specified session and removes any associated key pairs from storage.
- If a sessionKey is provided, it logs out from that session; otherwise, it logs out from the active session.
- Cleans up any api keys associated with the session.

#### Parameters

##### params?

###### sessionKey?

`string`

session key to specify which session to log out from (defaults to the active session).

#### Returns

`Promise`\<`void`\>

A promise that resolves when the logout process is complete.

#### Throws

If there is no active session or if there is an error during the logout process.

#### Inherited from

`TurnkeyClientMethods.logout`

***

### refreshSession()

> **refreshSession**: (`params?`) => `Promise`\<`undefined` \| [`TStampLoginResponse`](../../../_turnkey/sdk-types/TStampLoginResponse/readme)\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:903

Refreshes the session associated with the specified session key, or the active session by default.

- This function refreshes the session and updates the session token and key pair associated with the given session key.
- If a sessionKey is provided, it will refresh the session under that key; otherwise, it will use the current active session key.
- Optionally allows specifying a new expiration time for the session, a custom public key, and whether to invalidate the existing session after refreshing.
- Makes a request to the Turnkey API to stamp a new login and stores the refreshed session token.
- Automatically manages key pair cleanup and session storage to ensure consistency.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Parameters

##### params?

###### expirationSeconds?

`string`

expiration time in seconds for the refreshed session (defaults to the configured default).

###### invalidateExisitng?

`boolean`

flag to invalidate the existing session before refreshing (defaults to false).

###### publicKey?

`string`

public key to use for the refreshed session (if not provided, a new key pair will be generated).

###### sessionKey?

`string`

session key to refresh the session under (defaults to the active session key).

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper.

#### Returns

`Promise`\<`undefined` \| [`TStampLoginResponse`](../../../_turnkey/sdk-types/TStampLoginResponse/readme)\>

A promise that resolves to a `TStampLoginResponse` object containing the refreshed session details.

#### Throws

If the session key does not exist, if there is no active session, or if there is an error refreshing the session.

#### Inherited from

`TurnkeyClientMethods.refreshSession`

***

### removeOauthProviders()

> **removeOauthProviders**: (`params`) => `Promise`\<`string`[]\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:678

Removes a list of OAuth providers from the user.

- This function removes OAuth providers (e.g., Google, Apple) from the user's account.
- If a userId is provided, it removes the providers for that specific user; otherwise, it uses the current session's userId.
- Automatically ensures an active session exists before making the request.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).
- Returns an array of remaining provider IDs associated with the user after removal.

#### Parameters

##### params

###### providerIds

`string`[]

IDs of the OAuth providers to remove.

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### userId?

`string`

user ID to remove the provider for a specific user (defaults to the current session's userId).

#### Returns

`Promise`\<`string`[]\>

A promise that resolves to an array of provider IDs that were removed.

#### Throws

If there is no active session, if the userId is missing, or if there is an error removing the OAuth provider.

#### Inherited from

`TurnkeyClientMethods.removeOauthProviders`

***

### removePasskeys()

> **removePasskeys**: (`params`) => `Promise`\<`string`[]\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:720

Removes passkeys (authenticator) from the user.

- This function removes passkeys (WebAuthn/FIDO2 authenticators) from the user's account.
- If a userId is provided, it removes the passkeys for that specific user; otherwise, it uses the current session's userId.
- Automatically ensures an active session exists before making the request.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).
- Returns an array of remaining authenticator IDs for the user after removal.

#### Parameters

##### params

###### authenticatorIds

`string`[]

IDs of the authenticators (passkeys) to remove.

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### userId?

`string`

user ID to remove the passkeys for a specific user (defaults to the current session's userId).

#### Returns

`Promise`\<`string`[]\>

A promise that resolves to an array of authenticator IDs that were removed.

#### Throws

If there is no active session, if the userId is missing, or if there is an error removing the passkeys.

#### Inherited from

`TurnkeyClientMethods.removePasskeys`

***

### removeUserEmail()

> **removeUserEmail**: (`params?`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:577

Removes the user's email address.

- This function removes the user's email address by setting it to an empty string.
- If a userId is provided, it removes the email for that specific user; otherwise, it uses the current session's userId.
- Automatically ensures an active session exists before making the request.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Parameters

##### params?

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### userId?

`string`

user ID to remove a specific user's email address (defaults to the current session's userId).

#### Returns

`Promise`\<`string`\>

A promise that resolves to the userId of the user whose email was removed.

#### Throws

If there is no active session, if the userId is missing, or if there is an error removing the user email.

#### Inherited from

`TurnkeyClientMethods.removeUserEmail`

***

### removeUserPhoneNumber()

> **removeUserPhoneNumber**: (`params?`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:616

Removes the user's phone number.

- This function removes the user's phone number by setting it to an empty string.
- If a userId is provided, it removes the phone number for that specific user; otherwise, it uses the current session's userId.
- Automatically ensures an active session exists before making the request.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Parameters

##### params?

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### userId?

`string`

user ID to remove a specific user's phone number (defaults to the current session's userId).

#### Returns

`Promise`\<`string`\>

A promise that resolves to the userId of the user whose phone number was removed.

#### Throws

If there is no active session, if the userId is missing, or if there is an error removing the user phone number.

#### Inherited from

`TurnkeyClientMethods.removeUserPhoneNumber`

***

### session

> **session**: `undefined` \| [`Session`](../../../sdk-browser/index/Session/readme)

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:43](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L43)

***

### setActiveSession()

> **setActiveSession**: (`params`) => `Promise`\<`void`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:948

Sets the active session to the specified session key.

- This function updates the `activeSessionKey` in persistent storage to the specified session key.
- Ensures that subsequent operations use the session associated with this key as the active session.
- Does not validate whether the session key exists or is valid; it simply updates the pointer.
- Useful for switching between multiple stored sessions or restoring a previous session context.

#### Parameters

##### params

###### sessionKey

`string`

session key to set as the active session.

#### Returns

`Promise`\<`void`\>

A promise that resolves when the active session key is successfully set.

#### Throws

If the client is not initialized or if there is an error setting the active session key.

#### Inherited from

`TurnkeyClientMethods.setActiveSession`

***

### signAndSendTransaction()

> **signAndSendTransaction**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:515

Signs and broadcasts a transaction using the specified wallet account.

- For **connected wallets**:
  - Calls the wallet’s native `signAndSendTransaction` method.
  - Does **not** require an `rpcUrl`.

- For **embedded wallets**:
  - Signs the transaction using the Turnkey API.
  - Requires an `rpcUrl` to broadcast the transaction.
  - Broadcasts the transaction using a JSON-RPC client.

#### Parameters

##### params

###### rpcUrl?

`string`

required for embedded wallets to broadcast the signed transaction.

###### stampWith?

[`StamperType`](../StamperType/readme)

optional stamper to tag the signing request.

###### transactionType

[`v1TransactionType`](../../../_turnkey/sdk-types/v1TransactionType/readme)

transaction type (e.g., "TRANSACTION_TYPE_SOLANA").

###### unsignedTransaction

`string`

unsigned transaction (serialized string).

###### walletAccount

[`WalletAccount`](../WalletAccount/readme)

wallet account to use for signing and sending.

#### Returns

`Promise`\<`string`\>

A promise that resolves to a transaction signature or hash.

#### Throws

If signing or broadcasting fails.

#### Inherited from

`TurnkeyClientMethods.signAndSendTransaction`

***

### signMessage()

> **signMessage**: (`params`) => `Promise`\<[`v1SignRawPayloadResult`](../../../_turnkey/sdk-types/v1SignRawPayloadResult/readme)\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:465

Signs a message using the specified wallet account.

- Supports both embedded and connected wallets.
- For **connected wallets**:
  - Delegates signing to the wallet provider’s native signing method.
  - **Important:** For Ethereum wallets (e.g., MetaMask), signatures follow [EIP-191](https://eips.ethereum.org/EIPS/eip-191).
    The message is automatically prefixed with `"\x19Ethereum Signed Message:\n" + message length`
    before signing. As a result, this signature **cannot be used as a raw transaction signature**
    or broadcast on-chain.
- For **embedded wallets**, uses the Turnkey API to sign the message directly.
- Automatically handles message encoding and hashing based on the wallet account’s address format,
  unless explicitly overridden.

#### Parameters

##### params

###### addEthereumPrefix?

`boolean`

whether to prefix the message with Ethereum's `"\x19Ethereum Signed Message:\n"` string.
  - If `true` (default for Ethereum), the message is prefixed before signing.
  - If `false`:
    - Connected wallets will throw an error because they always prefix automatically.
    - Embedded wallets will sign the raw message without any prefix.

###### encoding?

[`v1PayloadEncoding`](../../../_turnkey/sdk-types/v1PayloadEncoding/readme)

override for the payload encoding (defaults to the encoding appropriate for the address type).

###### hashFunction?

[`v1HashFunction`](../../../_turnkey/sdk-types/v1HashFunction/readme)

override for the hash function (defaults to the hash function appropriate for the address type).

###### message

`string`

message to sign.

###### stampWith?

[`StamperType`](../StamperType/readme)

stamper to tag the signing request (e.g., Passkey, ApiKey, or Wallet).

###### walletAccount

[`WalletAccount`](../WalletAccount/readme)

wallet account to use for signing.

#### Returns

`Promise`\<[`v1SignRawPayloadResult`](../../../_turnkey/sdk-types/v1SignRawPayloadResult/readme)\>

A promise resolving to a `v1SignRawPayloadResult` containing the signature and metadata.

#### Throws

If signing fails, if the wallet account does not support signing, or if the response is invalid.

#### Inherited from

`TurnkeyClientMethods.signMessage`

***

### signTransaction()

> **signTransaction**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:489

Signs a transaction using the specified wallet account.

- This function signs a blockchain transaction using the provided wallet address and transaction data.
- Supports all Turnkey-supported blockchain networks (e.g., Ethereum, Solana, Tron).
- Automatically determines the appropriate signing method based on the transaction type.
- Delegates signing to the Turnkey API, which returns the signed transaction and related metadata.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Parameters

##### params

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### transactionType

[`v1TransactionType`](../../../_turnkey/sdk-types/v1TransactionType/readme)

type of transaction (e.g., "TRANSACTION_TYPE_ETHEREUM", "TRANSACTION_TYPE_SOLANA", "TRANSACTION_TYPE_TRON").

###### unsignedTransaction

`string`

unsigned transaction data (serialized as a string) to be signed.

###### walletAccount

[`WalletAccount`](../WalletAccount/readme)

wallet account to use for signing the transaction.

#### Returns

`Promise`\<`string`\>

A promise that resolves to a `TSignTransactionResponse` object containing the signed transaction and any additional signing metadata.

#### Throws

If there is an error signing the transaction or if the response is invalid.

#### Inherited from

`TurnkeyClientMethods.signTransaction`

***

### signUpWithOauth()

> **signUpWithOauth**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:392

Signs up a user using OAuth authentication.

- This function creates a new sub-organization for the user using the provided OIDC token, public key, and provider name.
- Handles the full OAuth sign-up flow, including sub-organization creation and session management.
- Optionally accepts additional sub-organization creation parameters and a custom session key.
- After successful sign-up, automatically logs in the user and returns a signed JWT session token.

#### Parameters

##### params

###### createSubOrgParams?

[`CreateSubOrgParams`](../CreateSubOrgParams/readme)

parameters for sub-organization creation (e.g., authenticators, user metadata).

###### oidcToken

`string`

OIDC token received after successful authentication with the OAuth provider.

###### providerName

`string`

name of the OAuth provider (e.g., "Google", "Apple").

###### publicKey

`string`

public key to associate with the new sub-organization.

###### sessionKey?

`string`

session key to use for session creation (defaults to the default session key).

#### Returns

`Promise`\<`string`\>

A promise that resolves to a signed JWT session token for the new sub-organization.

#### Throws

If there is an error during the OAuth sign-up or login process.

#### Inherited from

`TurnkeyClientMethods.signUpWithOauth`

***

### signUpWithOtp()

> **signUpWithOtp**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:291

Signs up a user using an OTP verification token.

- This function signs up a user using the verification token received after OTP verification (from email or SMS).
- Creates a new sub-organization for the user with the provided parameters and associates the contact (email or phone) with the sub-organization.
- Automatically generates a new API key pair for authentication and session management.
- Stores the resulting session token under the specified session key, or the default session key if not provided.
- Handles both email and SMS OTP types, and supports additional sub-organization creation parameters.

#### Parameters

##### params

###### contact

`string`

contact information for the user (e.g., email address or phone number).

###### createSubOrgParams?

[`CreateSubOrgParams`](../CreateSubOrgParams/readme)

parameters for creating a sub-organization (e.g., authenticators, user metadata).

###### invalidateExisting?

`boolean`

flag to invalidate existing session for the user.

###### otpType

[`OtpType`](../OtpType/readme)

type of OTP being used (OtpType.Email or OtpType.Sms).

###### sessionKey?

`string`

session key to use for session creation (defaults to the default session key).

###### verificationToken

`string`

verification token received after OTP verification.

#### Returns

`Promise`\<`string`\>

A promise that resolves to a signed JWT session token for the new sub-organization.

#### Throws

If there is an error during the OTP sign-up process or session storage.

#### Inherited from

`TurnkeyClientMethods.signUpWithOtp`

***

### signUpWithPasskey()

> **signUpWithPasskey**: (`params?`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:92

Signs up a user using a passkey, creating a new sub-organization and session.

- This function creates a new passkey authenticator and uses it to register a new sub-organization for the user.
- Handles both passkey creation and sub-organization creation in a single flow.
- Optionally accepts additional sub-organization parameters, a custom session key, a custom passkey display name, and a custom session expiration.
- Automatically generates a new API key pair for authentication and session management.
- Stores the resulting session token and manages cleanup of unused key pairs.

#### Parameters

##### params?

###### createSubOrgParams?

[`CreateSubOrgParams`](../CreateSubOrgParams/readme)

parameters for creating a sub-organization (e.g., authenticators, user metadata).

###### expirationSeconds?

`string`

session expiration time in seconds (defaults to the configured default).

###### passkeyDisplayName?

`string`

display name for the passkey (defaults to a generated name based on the current timestamp).

###### sessionKey?

`string`

session key to use for storing the session (defaults to the default session key).

#### Returns

`Promise`\<`string`\>

A promise that resolves to a signed JWT session token for the new sub-organization.

#### Throws

If there is an error during passkey creation, sub-organization creation, or session storage.

#### Inherited from

`TurnkeyClientMethods.signUpWithPasskey`

***

### signUpWithWallet()

> **signUpWithWallet**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:180

Signs up a user using a wallet, creating a new sub-organization and session.

- This function creates a new wallet authenticator and uses it to register a new sub-organization for the user.
- Handles both wallet authentication and sub-organization creation in a single flow.
- Optionally accepts additional sub-organization parameters, a custom session key, and a custom session expiration.
- Automatically generates additional API key pairs for authentication and session management.
- Stores the resulting session token under the specified session key, or the default session key if not provided, and manages cleanup of unused key pairs.

#### Parameters

##### params

###### createSubOrgParams?

[`CreateSubOrgParams`](../CreateSubOrgParams/readme)

parameters for creating a sub-organization (e.g., authenticators, user metadata).

###### expirationSeconds?

`string`

session expiration time in seconds (defaults to the configured default).

###### sessionKey?

`string`

session key to use for storing the session (defaults to the default session key).

###### walletProvider

[`WalletProvider`](../WalletProvider/readme)

wallet provider to use for authentication.

#### Returns

`Promise`\<`string`\>

A promise that resolves to a signed JWT session token for the new sub-organization.

#### Throws

If there is an error during wallet authentication, sub-organization creation, session storage, or cleanup.

#### Inherited from

`TurnkeyClientMethods.signUpWithWallet`

***

### storeSession()

> **storeSession**: (`params`) => `Promise`\<`void`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:854

Stores a session token and updates the session associated with the specified session key, or by default the active session.

- This function parses and stores a signed JWT session token in local storage, associating it with the given session key.
- If a sessionKey is provided, the session will be stored under that key; otherwise, it will use the default session key.
- If a session already exists for the session key, its associated key pair will be deleted before storing the new session.
- After storing the session, any unused key pairs are automatically cleared from storage.
- Ensures that session management is consistent and prevents orphaned key pairs.

#### Parameters

##### params

###### sessionKey?

`string`

session key to store the session under (defaults to the default session key).

###### sessionToken

`string`

JWT session token to store.

#### Returns

`Promise`\<`void`\>

A promise that resolves when the session is successfully stored.

#### Throws

If there is an error storing the session or cleaning up key pairs.

#### Inherited from

`TurnkeyClientMethods.storeSession`

***

### switchWalletProviderChain()

> **switchWalletProviderChain**: (`walletProvider`, `chainOrId`) => `Promise`\<`void`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:141

Switches the specified wallet provider to a different blockchain chain.

- Requires the wallet manager and its connector to be initialized.
- The wallet provider must have at least one connected address.
- Does nothing if the wallet provider is already on the desired chain.

#### Parameters

##### walletProvider

[`WalletProvider`](../WalletProvider/readme)

wallet provider to switch.

##### chainOrId

target chain as a chain ID string or SwitchableChain object.

`string` | [`SwitchableChain`](../SwitchableChain/readme)

#### Returns

`Promise`\<`void`\>

A promise that resolves once the chain switch is complete.

#### Throws

If the wallet manager is uninitialized, the provider is not connected, or the switch fails.

#### Inherited from

`TurnkeyClientMethods.switchWalletProviderChain`

***

### updateUserEmail()

> **updateUserEmail**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:558

Updates the user's email address.

- This function updates the user's email address and, if provided, verifies it using a verification token (typically from an OTP flow).
- If a userId is provided, it updates the email for that specific user; otherwise, it uses the current session's userId.
- If a verificationToken is not provided, the email will be updated but will not be marked as verified.
- Automatically ensures an active session exists before making the request.
- Handles session management and error reporting for both update and verification flows.

#### Parameters

##### params

###### email

`string`

new email address to set for the user.

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### userId?

`string`

user ID to update a specific user's email (defaults to the current session's userId).

###### verificationToken?

`string`

verification token from OTP email verification (required if verifying the email).

#### Returns

`Promise`\<`string`\>

A promise that resolves to the userId of the updated user.

#### Throws

If there is no active session, if the userId is missing, or if there is an error updating or verifying the user email.

#### Inherited from

`TurnkeyClientMethods.updateUserEmail`

***

### updateUserName()

> **updateUserName**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:635

Updates the user's name.

- This function updates the user's display name.
- If a userId is provided, it updates the name for that specific user; otherwise, it uses the current session's userId.
- Automatically ensures an active session exists before making the request.
- Optionally allows stamping the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).
- Handles session management and error reporting for the update flow.

#### Parameters

##### params

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### userId?

`string`

user ID to update a specific user's name (defaults to the current session's userId).

###### userName

`string`

new name to set for the user.

#### Returns

`Promise`\<`string`\>

A promise that resolves to the userId of the updated user.

#### Throws

If there is no active session, if the userId is missing, or if there is an error updating the user name.

#### Inherited from

`TurnkeyClientMethods.updateUserName`

***

### updateUserPhoneNumber()

> **updateUserPhoneNumber**: (`params`) => `Promise`\<`string`\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:597

Updates the user's phone number.

- This function updates the user's phone number and, if provided, verifies it using a verification token (from an OTP flow).
- If a userId is provided, it updates the phone number for that specific user; otherwise, it uses the current session's userId.
- If a verificationToken is not provided, the phone number will be updated but will not be marked as verified.
- Automatically ensures an active session exists before making the request.
- Handles session management and error reporting for both update and verification flows.

#### Parameters

##### params

###### phoneNumber

`string`

new phone number to set for the user.

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### userId?

`string`

user ID to update a specific user's phone number (defaults to the current session's userId).

###### verificationToken?

`string`

verification token from OTP phone verification (required if verifying the phone number).

#### Returns

`Promise`\<`string`\>

A promise that resolves to the userId of the updated user.

#### Throws

If there is no active session, if the userId is missing, or if there is an error updating or verifying the user phone number.

#### Inherited from

`TurnkeyClientMethods.updateUserPhoneNumber`

***

### user

> **user**: `undefined` \| [`v1User`](../../../_turnkey/sdk-types/v1User/readme)

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:48](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L48)

***

### verifyOtp()

> **verifyOtp**: (`params`) => `Promise`\<\{ `subOrganizationId`: `string`; `verificationToken`: `string`; \}\>

Defined in: core/dist/\_\_clients\_\_/core.d.ts:242

Verifies the OTP code sent to the user.

- This function verifies the OTP code entered by the user against the OTP sent to their contact information (email or phone) using the auth proxy.
- If verification is successful, it returns the sub-organization ID associated with the contact (if it exists) and a verification token.
- The verification token can be used for subsequent login or sign-up flows.
- Handles both email and SMS OTP types.

#### Parameters

##### params

###### contact

`string`

contact information for the user (e.g., email address or phone number).

###### otpCode

`string`

OTP code entered by the user.

###### otpId

`string`

ID of the OTP to verify (returned from `initOtp`).

###### otpType

[`OtpType`](../OtpType/readme)

type of OTP being verified (OtpType.Email or OtpType.Sms).

#### Returns

`Promise`\<\{ `subOrganizationId`: `string`; `verificationToken`: `string`; \}\>

A promise that resolves to an object containing:
  - subOrganizationId: sub-organization ID if the contact is already associated with a sub-organization, or an empty string if not.
  - verificationToken: verification token to be used for login or sign-up.

#### Throws

If there is an error during the OTP verification process, such as an invalid code or network failure.

#### Inherited from

`TurnkeyClientMethods.verifyOtp`

***

### wallets

> **wallets**: [`Wallet`](../Wallet/readme)[]

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:49](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L49)

## Methods

### handleAddOauthProvider()

> **handleAddOauthProvider**(`params`): `Promise`\<`void`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:408](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L408)

Handles the addition of an OAuth provider for the user.

- This function opens a modal-driven flow for linking a new OAuth provider (Google, Apple, or Facebook) to the user's account.
- It supports all enabled OAuth providers as defined in the configuration and dynamically triggers the appropriate OAuth flow.
- Uses the handleGoogleOauth, handleAppleOauth, and handleFacebookOauth functions to initiate the provider-specific OAuth authentication process.
- After successful authentication, the provider is linked to the user's account and a success page is shown.
- Automatically refreshes the user details state after linking to ensure the latest provider list is available in the provider.
- Optionally allows specifying the stamper to use for the addition (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet) for granular authentication control.
- Handles all error cases and throws a TurnkeyError with appropriate error codes.

#### Parameters

##### params

###### providerName

[`OAuthProviders`](../../../_turnkey/sdk-types/OAuthProviders/readme)

The name of the OAuth provider to add (OAuthProviders.GOOGLE, OAuthProviders.APPLE, OAuthProviders.FACEBOOK).

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to specify the stamper to use for the addition (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Returns

`Promise`\<`void`\>

A void promise.

#### Throws

If the client is not initialized, no active session is found, or if there is an error adding the provider.

***

### handleAddPasskey()

> **handleAddPasskey**(`params?`): `Promise`\<`string`[]\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:461](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L461)

Handles the addition of a passkey (authenticator) for the user.

- This function opens a modal-driven flow for adding a new passkey authenticator (WebAuthn/FIDO2) to the user's account.
- If a `name` or `displayName` is provided, those will be used for the passkey metadata; otherwise, defaults are generated based on the website and timestamp.
- The passkey is created and linked to the specified user (by `userId`) or the current session's user if not provided.
- After successful addition, a success page is shown for the specified duration (or skipped if `successPageDuration` is 0).
- Supports stamping the request with a specific stamper (`StamperType.Passkey`, `StamperType.ApiKey`, or `StamperType.Wallet`) for granular authentication control.
- Automatically refreshes the user details state after successful addition to ensure the latest authenticators list is available in the provider.
- Handles all error cases and throws a `TurnkeyError` with appropriate error codes.

#### Parameters

##### params?

###### displayName?

`string`

display name for the passkey (shown to the user in the UI).

###### name?

`string`

internal name for the passkey (for backend or developer reference).

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (`StamperType.Passkey`, `StamperType.ApiKey`, or `StamperType.Wallet`).

###### successPageDuration?

`number`

duration (in ms) for the success page after addition (default: 0, no success page).

###### userId?

`string`

user ID to add the passkey for a specific user (defaults to current session's userId).

#### Returns

`Promise`\<`string`[]\>

A promise that resolves to the user's updated passkeys.

#### Throws

If the client is not initialized, no active session is found, or if there is an error adding the passkey.

***

### handleAddPhoneNumber()

> **handleAddPhoneNumber**(`params?`): `Promise`\<`string`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:383](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L383)

Handles the add phone number flow.

- This function opens a modal with the UpdatePhoneNumber component for adding and verifying the user's phone number.
- If a phone number is provided, it will immediately send an OTP request to the user and display the OTP verification modal.
- Supports both manual entry and pre-filled phone numbers, as well as custom modal titles and subtitles.
- Uses the addPhoneNumberContinue helper to manage the OTP flow, verification, and update logic.
- After successful verification and update, the user details state is refreshed and an optional success page can be shown.
- Supports customizing the duration of the success page after update.
- Handles all error cases and throws a TurnkeyError with appropriate error codes.

#### Parameters

##### params?

###### formattedPhone?

`string`

parameter to specify the formatted phone number.

###### phoneNumber?

`string`

parameter to specify the new phone number.

###### subTitle?

`string`

subtitle for the modal.

###### successPageDuration?

`number`

duration (in ms) for the success page after update (default: 0, no success page).

###### title?

`string`

title for the modal.

#### Returns

`Promise`\<`string`\>

A promise that resolves to the userId of the user that was changed.

#### Throws

If the client is not initialized, no active session is found, or if there is an error adding the phone number.

***

### handleAppleOauth()

> **handleAppleOauth**(`params?`): `Promise`\<`void`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:160](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L160)

Handles the Apple OAuth flow.

- This function initiates the Apple OAuth flow by either redirecting the user to the Apple authorization page or opening it in a popup window.
- The flow type is determined by the `openInPage` parameter: if true, the current page is redirected; if false (default), a popup window is used.
- Generates a new ephemeral API key pair and uses its public key as the nonce for the OAuth request, ensuring cryptographic binding of the session.
- Constructs the Apple OAuth URL with all required parameters, including client ID, redirect URI, response type, response mode, nonce, and state.
- The `state` parameter includes the provider, flow type, public key, and any additional state parameters for tracking or custom logic.
- If `openInPage` is true, the function redirects and returns a promise that resolves on redirect or times out after 5 minutes.
- If `openInPage` is false, a popup window is opened and the function returns a promise that resolves when the flow completes, or rejects if the window is closed or times out.
- On successful authentication, the function either calls the provided `onOauthSuccess` callback, triggers the `onOauthRedirect` callback from provider callbacks, or completes the OAuth flow internally by calling `completeOauth`.
- Handles all error cases, including missing configuration, popup failures, and timeouts, and throws a `TurnkeyError` with appropriate error codes.

#### Parameters

##### params?

###### additionalState?

`Record`\<`string`, `string`\>

Additional key-value pairs to include in the OAuth state parameter for custom tracking or logic.

###### clientId?

`string`

The Apple Client ID to use (defaults to the client ID from configuration).

###### onOauthSuccess?

(`params`) => `any`

Callback function to handle the successful OAuth response (receives `{ oidcToken, providerName }`).

onOauthSuccess params:
- oidcToken: The OIDC token received from the OAuth flow.
- providerName: The name of the OAuth provider ("apple").

###### openInPage?

`boolean`

Whether to open the OAuth flow in the current page (redirect) or a popup window (default: false).

#### Returns

`Promise`\<`void`\>

A promise that resolves when the OAuth flow is successfully initiated and completed, or rejects on error or timeout.

#### Throws

If the configuration is not ready, required parameters are missing, or if there is an error initiating or completing the OAuth flow.

***

### handleExport()

> **handleExport**(`params`): `Promise`\<`void`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:226](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L226)

Handles the export flow.

- This function opens a modal with the ExportComponent for exporting a wallet or private key.
- Uses Turnkey's export iframe flow to securely export wallet or private key material.
- The export process encrypts the exported bundle to a target public key, which is generated and managed inside the iframe for maximum security.
- A request is made to the Turnkey API to export the wallet or private key, encrypted to the target public key.
- The resulting export bundle is injected into the iframe, where it is decrypted and displayed to the user.
- Supports both full wallet exports (ExportType.Wallet) and single private key exports (ExportType.PrivateKey).
- If a custom iframe URL is used, a target public key can be provided explicitly.
- Optionally allows specifying the stamper to use for the export (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet) for granular authentication control.
- The modal-driven UI ensures the user is guided through the export process and can securely retrieve their exported material.

#### Parameters

##### params

###### exportType

`ExportType`

The type of export to perform (ExportType.Wallet or ExportType.PrivateKey).

###### stampWith?

[`StamperType`](../StamperType/readme)

The stamper to use for the export (Passkey, ApiKey, or Wallet).

###### targetPublicKey?

`string`

The target public key to encrypt the export bundle to (required for custom iframe flows).

###### walletId

`string`

The ID of the wallet to export.

#### Returns

`Promise`\<`void`\>

A void promise.

***

### handleFacebookOauth()

> **handleFacebookOauth**(`params?`): `Promise`\<`void`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:196](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L196)

Handles the Facebook OAuth flow.

- This function initiates the Facebook OAuth flow by either redirecting the user to the Facebook authorization page or opening it in a popup window.
- The flow type is determined by the `openInPage` parameter: if true, the current page is redirected; if false (default), a popup window is used.
- Generates a new ephemeral API key pair and uses its public key as the nonce for the OAuth request, ensuring cryptographic binding of the session.
- Uses PKCE (Proof Key for Code Exchange) for enhanced security, generating a code verifier and challenge for the Facebook OAuth flow.
- Constructs the Facebook OAuth URL with all required parameters, including client ID, redirect URI, response type, code challenge, nonce, and state.
- The `state` parameter includes the provider, flow type, public key, and any additional state parameters for tracking or custom logic.
- If `openInPage` is true, the function redirects and returns a promise that resolves on redirect or times out after 5 minutes.
- If `openInPage` is false, a popup window is opened and the function returns a promise that resolves when the flow completes, or rejects if the window is closed or times out.
- On successful authentication, the function either calls the provided `onOauthSuccess` callback, triggers the `onOauthRedirect` callback from provider callbacks, or completes the OAuth flow internally by calling `completeOauth`.
- Handles all error cases, including missing configuration, popup failures, and timeouts, and throws a `TurnkeyError` with appropriate error codes.

#### Parameters

##### params?

###### additionalState?

`Record`\<`string`, `string`\>

Additional key-value pairs to include in the OAuth state parameter for custom tracking or logic.

###### clientId?

`string`

The Facebook Client ID to use (defaults to the client ID from configuration).

###### onOauthSuccess?

(`params`) => `any`

Callback function to handle the successful OAuth response (receives `{ oidcToken, providerName }`).

onOauthSuccess params:
- oidcToken: The OIDC token received from the OAuth flow.
- providerName: The name of the OAuth provider ("facebook").

###### openInPage?

`boolean`

Whether to open the OAuth flow in the current page (redirect) or a popup window (default: false).

#### Returns

`Promise`\<`void`\>

A promise that resolves when the OAuth flow is successfully initiated and completed, or rejects on error or timeout.

#### Throws

If the configuration is not ready, required parameters are missing, or if there is an error initiating or completing the OAuth flow.

***

### handleGoogleOauth()

> **handleGoogleOauth**(`params?`): `Promise`\<`void`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:125](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L125)

Handles the Google OAuth flow.

- This function initiates the Google OAuth flow by redirecting the user to the Google authorization page or opening it in a popup window.
- It supports both "popup" and "redirect" flows, determined by the `openInPage` parameter.
- Generates a new ephemeral API key pair and uses its public key as the nonce for the OAuth request, ensuring cryptographic binding of the session.
- Constructs the Google OAuth URL with all required parameters, including client ID, redirect URI, response type, scope, nonce, and state.
- The `state` parameter includes the provider, flow type, public key, and any additional state parameters for tracking or custom logic.
- If `openInPage` is true, the current page is redirected to the Google OAuth URL and the function returns a promise that resolves on redirect or times out after 5 minutes.
- If `openInPage` is false, a popup window is opened for the OAuth flow, and the function returns a promise that resolves when the flow completes or rejects if the window is closed or times out.
- On successful authentication, the function either calls the provided `onOauthSuccess` callback, triggers the `onOauthRedirect` callback from provider callbacks, or completes the OAuth flow internally by calling `completeOauth`.
- Handles all error cases, including missing configuration, popup failures, and timeouts, and throws a `TurnkeyError` with appropriate error codes.

#### Parameters

##### params?

###### additionalState?

`Record`\<`string`, `string`\>

Additional key-value pairs to include in the OAuth state parameter for custom tracking or logic.

###### clientId?

`string`

The Google Client ID to use (defaults to the client ID from configuration).

###### onOauthSuccess?

(`params`) => `any`

Callback function to handle the successful OAuth response (receives `{ oidcToken, providerName }`).

onOauthSuccess params:
- oidcToken: The OIDC token received from the OAuth flow.
- providerName: The name of the OAuth provider ("google").

###### openInPage?

`boolean`

Whether to open the OAuth flow in the current page (redirect) or a popup window (default: false).

#### Returns

`Promise`\<`void`\>

A promise that resolves when the OAuth flow is successfully initiated and completed, or rejects on error or timeout.

#### Throws

If the configuration is not ready, required parameters are missing, or if there is an error initiating or completing the OAuth flow.

***

### handleImport()

> **handleImport**(`params?`): `Promise`\<`string`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:250](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L250)

Handles the import flow.

- This function opens a modal with the ImportComponent for importing a wallet or private key.
- Supports importing wallets using an encrypted bundle, with optional default accounts or custom account parameters.
- Allows users to specify default wallet accounts (address formats or account params) to pre-fill the import form.
- Optionally accepts a callback to handle successful import, which receives the imported wallet's ID.
- Supports customizing the duration of the success page shown after a successful import.
- Allows specifying the stamper to use for the import (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet) for granular authentication control.
- Ensures the imported wallet is added to the user's wallet list and the provider state is refreshed.

#### Parameters

##### params?

###### defaultWalletAccounts?

[`v1AddressFormat`](../../../_turnkey/sdk-types/v1AddressFormat/readme)[] \| [`v1WalletAccountParams`](../../../_turnkey/sdk-types/v1WalletAccountParams/readme)[]

array of default wallet accounts (v1AddressFormat[] or v1WalletAccountParams[]) to pre-fill the import form.

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to specify the stamper to use for the import (Passkey, ApiKey, or Wallet).

###### successPageDuration?

`number`

duration (in ms) for the success page after import (default: 0, no success page).

#### Returns

`Promise`\<`string`\>

A promise that resolves to the new wallet's ID.

***

### handleLinkExternalWallet()

> **handleLinkExternalWallet**(`params?`): `Promise`\<`void`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:544](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L544)

Handles the linking of an external wallet account to the user's Turnkey account.

- This function opens a modal with the LinkWalletModal component, allowing the user to select and connect an external wallet provider (such as MetaMask, Phantom, etc.).
- It fetches the list of available wallet providers (for all supported chains) and passes them to the modal for user selection.
- After a successful wallet connection, the provider state is refreshed to include the newly linked wallet account.
- Optionally, a success page is shown for the specified duration after linking (default: 2000ms).
- Supports both Ethereum and Solana wallet providers, and can be extended to additional chains as supported by Turnkey.
- Handles all error cases and throws a TurnkeyError with appropriate error codes if the client is not initialized or no active session is found.

#### Parameters

##### params?

###### successPageDuration?

`number`

duration (in ms) for the success page after linking (default: 2000ms).

#### Returns

`Promise`\<`void`\>

A void promise.

#### Throws

If the client is not initialized or if no active session is found.

***

### handleLogin()

> **handleLogin**(): `Promise`\<`void`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:98](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L98)

Handles the login or sign-up flow.

- This function opens a modal with the AuthComponent, allowing the user to log in or sign up using any enabled authentication method (Passkey, Wallet, OTP, or OAuth).
- It automatically determines available authentication methods based on the current provider configuration and proxy settings.
- The modal-driven flow guides the user through the appropriate authentication steps, including social login if enabled.
- After successful authentication, the provider state is updated and all relevant session, user, and wallet data are refreshed.
- This function is typically used to trigger authentication from a UI button or navigation event.

#### Returns

`Promise`\<`void`\>

A void promise.

***

### handleRemoveOauthProvider()

> **handleRemoveOauthProvider**(`params`): `Promise`\<`string`[]\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:433](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L433)

Handles the removal of an OAuth provider.

- This function opens a modal with the RemoveOAuthProvider component, allowing the user to confirm and remove an OAuth provider (such as Google, Apple, or Facebook) from their account.
- It supports specifying the provider ID to remove, as well as optional modal title and subtitle for custom UI messaging.
- After successful removal, the user details state is refreshed to reflect the updated list of linked OAuth providers.
- Optionally, a callback can be provided to handle successful removal, receiving the updated list of provider IDs.
- Supports customizing the duration of the success page shown after removal.
- Allows specifying the stamper to use for the removal (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet) for granular authentication control.
- Handles all error cases and throws a TurnkeyError with appropriate error codes.

#### Parameters

##### params

###### providerId

`string`

The ID of the OAuth provider to remove (as found in the user's provider list).

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to specify the stamper to use for the removal (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### subTitle?

`string`

subtitle for the modal.

###### successPageDuration?

`number`

duration (in ms) for the success page after removal (default: 0, no success page).

###### title?

`string`

title for the modal.

#### Returns

`Promise`\<`string`[]\>

A promise that resolves to an array of provider IDs that were removed.

#### Throws

If the client is not initialized, no active session is found, or if there is an error removing the provider.

***

### handleRemovePasskey()

> **handleRemovePasskey**(`params`): `Promise`\<`string`[]\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:489](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L489)

Handles the removal of a passkey (authenticator) for the user.

- This function opens a modal with the RemovePasskey component, allowing the user to confirm and remove a passkey authenticator from their account.
- It supports specifying the authenticator ID to remove, as well as optional modal title and subtitle for custom UI messaging.
- After successful removal, the user details state is refreshed to reflect the updated list of authenticators.
- Supports customizing the duration of the success page shown after removal.
- Allows specifying the stamper to use for the removal (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet) for granular authentication control.
- Handles all error cases and throws a TurnkeyError with appropriate error codes.

#### Parameters

##### params

###### authenticatorId

`string`

The ID of the authenticator (passkey) to remove.

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to specify the stamper to use for the removal (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### subTitle?

`string`

subtitle for the modal.

###### successPageDuration?

`number`

duration (in ms) for the success page after removal (default: 0, no success page).

###### title?

`string`

title for the modal.

###### userId?

`string`

user ID to remove the passkey for a specific user (defaults to current session's userId).

#### Returns

`Promise`\<`string`[]\>

A promise that resolves to an array of authenticator IDs that were removed.

#### Throws

If the client is not initialized, no active session is found, or if there is an error removing the passkey.

***

### handleRemoveUserEmail()

> **handleRemoveUserEmail**(`params?`): `Promise`\<`string`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:557](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L557)

Handles the removal of a user's email address from their Turnkey account.

- This function opens a modal with the RemoveUserEmail component, allowing the user to confirm and remove their email address.

#### Parameters

##### params?

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to specify the stamper to use for the removal (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### successPageDuration?

`number`

duration (in ms) for the success page after removal (default: 0, no success page).

###### userId?

`string`

The user ID to remove the email for (defaults to current session's userId).

#### Returns

`Promise`\<`string`\>

***

### handleRemoveUserPhoneNumber()

> **handleRemoveUserPhoneNumber**(`params?`): `Promise`\<`string`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:572](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L572)

Handles the removal of a user's phone number from their Turnkey account.

- This function opens a modal with the RemoveUserPhoneNumber component, allowing the user to confirm and remove their phone number.

#### Parameters

##### params?

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to specify the stamper to use for the removal (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### successPageDuration?

`number`

duration (in ms) for the success page after removal (default: 0, no success page).

###### userId?

`string`

The user ID to remove the phone number for (defaults to current session's userId).

#### Returns

`Promise`\<`string`\>

***

### handleSignMessage()

> **handleSignMessage**(`params`): `Promise`\<[`v1SignRawPayloadResult`](../../../_turnkey/sdk-types/v1SignRawPayloadResult/readme)\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:518](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L518)

Handles the signing of a message by displaying a modal for user interaction.

- This function opens a modal with the SignMessageModal component, prompting the user to review and approve the message signing request.
- Supports signing with any wallet account managed by Turnkey, including externally linked wallets.
- Allows for optional overrides of the encoding and hash function used for the payload, enabling advanced use cases or compatibility with specific blockchains.
- Optionally displays a subtext in the modal for additional context or instructions to the user.
- Returns a promise that resolves to a `v1SignRawPayloadResult` object containing the signed message, signature, and metadata.

#### Parameters

##### params

###### addEthereumPrefix?

`boolean`

whether to add the Ethereum prefix to the message (default: false).

###### encoding?

[`v1PayloadEncoding`](../../../_turnkey/sdk-types/v1PayloadEncoding/readme)

encoding for the payload (defaults to the proper encoding for the account type).

###### hashFunction?

[`v1HashFunction`](../../../_turnkey/sdk-types/v1HashFunction/readme)

hash function to use (defaults to the appropriate function for the account type).

###### message

`string`

The message to sign.

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

###### subText?

`string`

subtext to display in the modal.

###### successPageDuration?

`number`

duration in seconds to display the success page after signing.

###### walletAccount

[`WalletAccount`](../WalletAccount/readme)

The wallet account to use for signing.

#### Returns

`Promise`\<[`v1SignRawPayloadResult`](../../../_turnkey/sdk-types/v1SignRawPayloadResult/readme)\>

A promise that resolves to a `v1SignRawPayloadResult` object containing the signed message.

#### Throws

If the client is not initialized or if there is an error during the signing process.

***

### handleUpdateUserEmail()

> **handleUpdateUserEmail**(`params?`): `Promise`\<`string`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:275](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L275)

Handles the update user name flow.

- This function opens a modal with the UpdateUserName component for updating and verifying the user's name.
- If a userName is provided, it will directly update the user name without showing the modal.
- Uses updateUserName under the hood to perform the update and automatically refreshes the user details state after a successful update.
- Optionally displays a success page after the update, with customizable duration.
- Supports passing a custom title and subtitle for the modal UI.
- Handles all error cases and throws a TurnkeyError with appropriate error codes.

#### Parameters

##### params?

###### email?

`string`

###### subTitle?

`string`

subtitle for the modal.

###### successPageDuration?

`number`

duration (in ms) for the success page after update (default: 0, no success page).

###### title?

`string`

title for the modal.

#### Returns

`Promise`\<`string`\>

A promise that resolves to the userId of the user that was changed.

#### Throws

If the client is not initialized, no active session is found, or if there is an error updating the user name.

***

### handleUpdateUserPhoneNumber()

> **handleUpdateUserPhoneNumber**(`params?`): `Promise`\<`string`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:302](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L302)

Handles the update user phone number flow.

- This function opens a modal with the UpdatePhoneNumber component for updating and verifying the user's phone number.
- If a phoneNumber is provided, it will directly send an OTP request to the user and display the OTP verification modal.
- Supports both manual entry and pre-filled phone numbers, as well as custom modal titles and subtitles.
- Uses the updatePhoneNumberContinue helper to manage the OTP flow, verification, and update logic.
- After successful verification and update, the user details state is refreshed and an optional success page can be shown.
- Supports customizing the duration of the success page after update.
- Throws a TurnkeyError if the client is not initialized, no active session is found, SMS OTP is not enabled, or if there is an error updating the phone number.

#### Parameters

##### params?

###### formattedPhone?

`string`

parameter to specify the formatted phone number.

###### phoneNumber?

`string`

parameter to specify the new phone number.

###### subTitle?

`string`

subtitle for the modal.

###### successPageDuration?

`number`

duration for the success page (default: 0, no success page).

###### title?

`string`

title for the modal.

#### Returns

`Promise`\<`string`\>

A promise that resolves to the userId of the user that was changed.

#### Throws

If the client is not initialized, no active session is found, SMS OTP is not enabled, or if there is an error updating the phone number.

***

### refreshUser()

> **refreshUser**(`params?`): `Promise`\<`void`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:65](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L65)

Refreshes the user details.

- This function fetches the latest user details for the current session (or optionally for a specific user/organization if provided)
  and updates the `user` state variable in the provider.
- If a `stampWith` parameter is provided, it will use that stamper to fetch the user details (supports Passkey, ApiKey, or Wallet stampers).
- Automatically handles error reporting via the configured callbacks.
- Typically used after authentication, user profile updates, or linking/unlinking authenticators to ensure the provider state is up to date.
- If no user is found, the state will not be updated.

#### Parameters

##### params?

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Returns

`Promise`\<`void`\>

A promise that resolves when the user details are successfully refreshed and state is updated.

#### Throws

If the client is not initialized or if there is an error refreshing the user details.

***

### refreshWallets()

> **refreshWallets**(`params?`): `Promise`\<`void`\>

Defined in: [react-wallet-kit/src/providers/client/Types.tsx:83](https://github.com/tkhq/sdk/blob/main/packages/react-wallet-kit/src/providers/client/Types.tsx#L83)

Refreshes the wallets state for the current user session.

- This function fetches the latest list of wallets associated with the current session or user,
  and updates the `wallets` state variable in the provider.
- If a `stampWith` parameter is provided, it will use that stamper to fetch the wallets
  (supports Passkey, ApiKey, or Wallet stampers for granular authentication control).
- Automatically handles error reporting via the configured callbacks.
- Typically used after wallet creation, import, export, account changes, or authentication
  to ensure the provider state is up to date.
- If no wallets are found, the state will be set to an empty array.

#### Parameters

##### params?

###### stampWith?

[`StamperType`](../StamperType/readme)

parameter to stamp the request with a specific stamper (StamperType.Passkey, StamperType.ApiKey, or StamperType.Wallet).

#### Returns

`Promise`\<`void`\>

A promise that resolves when the wallets are successfully refreshed and state is updated.

#### Throws

If the client is not initialized or if there is an error refreshing the wallets.
