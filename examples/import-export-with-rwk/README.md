# Example: `import-export-with-rwk`

This is a minimal Next.js app showing how to implement **import and export for wallets, wallet accounts and raw private keys** using:
- [@turnkey/react-wallet-kit](https://docs.turnkey.com/sdks/react)
- Turnkey's [import/export iframe flow](https://docs.turnkey.com/embedded-wallets/code-examples/export#embedded-iframe)
- Turnkey's managed [Auth Proxy](https://docs.turnkey.com/reference/auth-proxy) (no backend required, your frontend can securely perform sign-up / login without hosting your own authentication server)

### What this demo shows

A high-level overview of the experience:

**1. Login or sign-up with a passkey**

Users authenticate via @turnkey/react-wallet-kit. If this is their first time, Turnkey automatically provisions a sub-organization with:
- their new passkey registered as an authenticator
- one HD wallet containing:
   - one Ethereum account
   - one Solana account

>Learn how to customize the sub-organization creation parameters → https://docs.turnkey.com/sdks/react/sub-organization-customization

**2. Dashboard UI**

Once authenticated, the dashboard displays two main panels, each with its own list/detail layout:

**HD Wallets & Wallet Accounts**

Shows the user’s Turnkey-created hierarchical wallets:
- HD wallet seeds
- All derived wallet accounts (Ethereum, Solana, etc)

For the selected wallet or account, the actions panel allows:
- Export Wallet
- Export Wallet Account
- Import Wallet (import an entire HD seed phrase)

**Raw Private Keys**

Shows all standalone private keys, which may be:
- imported by the user
- or generated by Turnkey

For the selected private key, the actions panel allows:
- Export Private Key
- Import Private Key (choose curve + address formats)

>Learn the difference between HD wallets, wallet accounts and raw private keys → https://docs.turnkey.com/concepts/wallets

**3. Secure iframe-based import/export**

All import/export operations use `@turnkey/iframe-stamper`, ensuring that:
- private key material is encrypted and decrypted only inside an isolated iframe
- your frontend never touches raw keys directly

>For a lower-level example using  `@turnkey/iframe-stamper` see → https://github.com/tkhq/sdk/tree/main/examples/import-export-with-iframe-stamper

## How it works

All import/export actions call the high-level helpers in @turnkey/react-wallet-kit:
- [handleExportWallet](https://docs.turnkey.com/generated-docs/formatted/react-wallet-kit/client-context-type-handle-export-wallet)
- [handleImportWallet](https://docs.turnkey.com/generated-docs/formatted/react-wallet-kit/client-context-type-handle-import-wallet)
- [handleExportWalletAccount](https://docs.turnkey.com/generated-docs/formatted/react-wallet-kit/client-context-type-handle-export-wallet-account)
- [handleImportPrivateKey](https://docs.turnkey.com/generated-docs/formatted/react-wallet-kit/client-context-type-handle-import-private-key)
- [handleExportPrivateKey](https://docs.turnkey.com/generated-docs/formatted/react-wallet-kit/client-context-type-handle-export-private-key)

Each helper wraps the appropriate iframe flow and handles:
- iframe initialization and cleanup
- encryption/decryption
- user prompts
- stamping with the user authenticated session

## Getting started

### 1/ Cloning the example

Make sure you have `node` installed locally; we recommend using Node v20+.

```bash
$ git clone https://github.com/tkhq/sdk
$ cd sdk/
$ corepack enable  # Install `pnpm`
$ pnpm install -r  # Install dependencies
$ pnpm run build-all  # Compile source code
$ cd examples/import-export-with-rwk
```

### 2/ Setting up Turnkey

- Set up your [Turnkey organization and account](https://docs.turnkey.com/getting-started/quickstart#create-an-account) and write down the parent organization id.
- Enable [Auth Proxy](https://app.turnkey.com/dashboard/walletKit) from your Turnkey dashboard, choose the user auth methods and write down the Auth Proxy Config ID.

Once you've gathered these values, add them to a new `.env.local` file.

```bash
$ cp .env.local.example .env.local
```

Now open `.env.local` and add the missing environment variables:

- `NEXT_PUBLIC_BASE_URL`
- `NEXT_PUBLIC_ORGANIZATION_ID`
- `NEXT_PUBLIC_AUTH_PROXY_CONFIG_ID`
- `NEXT_PUBLIC_AUTH_PROXY_BASE_URL`

### 3/ Running the app

```bash
$ pnpm run dev
```

This command will run a NextJS app on port 3000. If you navigate to http://localhost:3000 in your browser, you can follow the prompts to start an oauth activity.
